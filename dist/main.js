(()=>{"use strict";const e=function(e,t){var r=document.querySelector(".cards-container"),n=document.createElement("article");n.className="project-card",n.dataset.project=t;var o=document.createElement("h2");o.textContent=e;var c=document.createElement("button");c.textContent="X",c.className="btn-delete-project";var a=document.createElement("ul"),i=document.createElement("button");i.textContent="Add new task",n.append(o,c,a,i),r.append(n)},t=function(e,t,r){var n=document.querySelector("#select-project"),o=document.querySelector("#projects-view-selector"),c=document.createElement("option");c.value=t,c.textContent=e,"list"===r?n.append(c):"view"===r?o.append(c):window.alert("You have to select list or view as where parameter.")},r=function(e){var t=document.createElement("li"),r=document.createElement("input");r.setAttribute("type","checkbox"),r.className="checkbox",r.setAttribute("name","done"),!0===e.status&&(r.checked=!0);var n=document.createElement("label");n.setAttribute("for","done"),n.textContent=e.title,"true"===e.status&&(r.checked=!0,n.classList.add("done-task-txt"));var o=document.createElement("img");o.src="./img/trash.svg",o.className="erase-icon";var c=document.createElement("span");c.style="color: rgba(0, 0, 0, 0.5); float: right;",c.textContent=e.dueDate;var a=document.createElement("div");switch(e.priority){default:a.setAttribute("title","Low Priority"),a.className="low-priority-circle";break;case"mid":a.setAttribute("title","Medium Priority"),a.className="mid-priority-circle";break;case"high":a.setAttribute("title","High Priority"),a.className="high-priority-circle"}return t.append(r,n,o,c,a),t},n=function(e){var t=document.createElement("div");t.className="task-editor";var r=document.createElement("div");r.className="task-editor-window";var n=document.createElement("input");n.className="text-editor-inputs",n.setAttribute("type","text"),n.value=e.title,n.textContent=e.title;var o=document.createElement("textarea");o.className="text-editor-description",o.className="text-editor-inputs",o.value=e.description;var c=document.createElement("input");c.className="text-editor-inputs",c.setAttribute("type","date"),c.value=e.dueDate;var a=document.createElement("select");a.className="text-editor-inputs";var i=document.createElement("option");i.value="low",i.textContent="Low";var u=document.createElement("option");u.value="mid",u.textContent="Mid";var l=document.createElement("option");l.value="high",l.textContent="High",a.append(i,u,l),a.value=e.priority;var s=document.createElement("button");return s.id="save-changes",s.setAttribute("type","button"),s.innerText="Save changes / Close",r.append(n,o,c,a,s),t.append(r),t};var o=function(e){return null!==localStorage.getItem(e)&&"undefined"!==localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):"Projects"===e?["Default Project"]:[]},c=function(e,t){localStorage.setItem(e,JSON.stringify(t))};function a(e){return e.split(/\s+/).join("-")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const u=function(){var e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"No description",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Default",o=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];i(this,e),this.title=t,this.description=r,this.project=n,this.dueDate=o,this.priority=c,this.status=a};function t(e,t){var r,n=t;return n.forEach((function(t){t.title===e&&(r=n.indexOf(t))})),r}var a=function(e){var r=o("Tasks"),a=t(e.target.innerText,r),i=r[a],u=document.querySelector("body"),l=n(i);u.append(l),document.querySelector("#save-changes").addEventListener("click",(function(){!function(e){var t=o("Tasks"),r=t[e];r.title=document.querySelector(".text-editor-inputs[type=text]").value,r.description=document.querySelector("textarea").value,r.dueDate=document.querySelector(".text-editor-inputs[type=date]").value,r.priority=document.querySelector("select.text-editor-inputs").value,t[e]=r,c("Tasks",t);var n=document.querySelector("body"),a=document.querySelector(".task-editor");n.removeChild(a),window.location.reload()}(a)}))},u=function(e){if(!0===window.confirm("Are you sure?")){var t=o("Tasks"),r=e.target.previousSibling.innerText,n=t.filter((function(e){return e.title!==r}));t=[].concat(n),c("Tasks",t);var a=e.target.parentNode.parentNode,i=e.target.parentNode;a.removeChild(i)}},l=function(e){var t=o("Tasks");t.forEach((function(t){t.title===e.target.nextSibling.innerText&&e.target.checked?t.status=!0:t.title!==e.target.nextSibling.innerText||e.target.checked||(t.status=!1)})),c("Tasks",t)},s=function(){document.querySelectorAll(".checkbox").forEach((function(e){e.addEventListener("change",l)})),document.querySelectorAll("label").forEach((function(e){e.addEventListener("click",a)})),document.querySelectorAll(".erase-icon").forEach((function(e){e.addEventListener("click",u)}))},d=function(){var t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(""===t)return alert("Task can't be empty.");var d=new e(t,"Default Description",n,a,i,u),m=document.querySelector('article.project-card[data-project="'.concat(n,'"]')),p=document.createElement("ul"),v=r(d);if(p.append(v),m.append(p),!1===l){var f=o("Tasks");f.push(d),c("Tasks",f)}document.querySelector("#input-todo-name").value="",document.querySelector(".date-picker").value="",s()};return{addToDo:d,loadTasks:function(){o("Tasks").forEach((function(e){localStorage.getItem("Projects").includes(e.project.split(/-+/).join(" "))&&d(e.description,e.title,e.project,e.dueDate,e.priority,e.status,!0)})),s()},markAsDone:l,findIdxWithName:t,ToDo:e}}();var l,s,d,m=(s=function(e){!0===window.confirm("Do you really want to delete the whole Project??")&&l(e)},d=function(){document.querySelectorAll(".btn-delete-project").forEach((function(e){return e.addEventListener("click",s)}))},{addNewProject:function(r){if(""===r)return alert("You cannot have empty name.");if(o("Projects").includes(r))return alert("Your project name is duplicated. Try another.");var n=a(r);e(r,n),t(r,n,"list"),t(r,n,"view");var i=o("Projects");i.push(r),c("Projects",i),d()},getProjectsList:function(){var e=[];return null!==o("Projects")?e=o("Projects"):(e=["Default Project"],localStorage.setItem("Projects",JSON.stringify(e))),e},spreadProjectsListToView:function(r){r.forEach((function(r){var n=a(r);e(r,n),t(r,n,"list"),t(r,n,"view"),d()}))},deleteProject:l=function(e){var t=o("Projects"),r=o("Tasks"),n=e.target.previousElementSibling.innerText;t.splice(t.indexOf(n),1);var a=r.filter((function(e){return e.project!==n}));c("Projects",t),c("Tasks",a),window.location.reload()}}),p=u,v=m.getProjectsList();m.spreadProjectsListToView(v),u.loadTasks();var f=document.querySelector(".input-project-name"),h=document.querySelector(".new-project-submit"),y=document.querySelector(".new-task-submit"),g=document.querySelector("#input-todo-name"),k=document.querySelector("#select-project"),E=document.querySelector(".date-picker"),S=document.querySelector(".priority-picker");h.addEventListener("click",(function(){m.addNewProject(f.value)})),y.addEventListener("click",(function(){return p.addToDo("Default Description",g.value,k.value,E.value,S.value,!1,!1)}))})();